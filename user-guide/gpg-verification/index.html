



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.1.1">
    
    
      
        <title>GnuPG verification - Argo CD - Declarative GitOps CD for Kubernetes</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.3020aac5.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.224b79ff.css">
      
      
        
        
        <meta name="theme-color" content="#009688">
      
    
    
      <script src="../../assets/javascripts/modernizr.01ccdecf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Work+Sans:300,400,400i,700|">
        <style>body,input{font-family:"Work Sans","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../assets/versions.css">
    
    
      
        
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-105170809-2", "auto")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="teal" data-md-color-accent="">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#gnupg-signature-verification" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="Argo CD - Declarative GitOps CD for Kubernetes" class="md-header-nav__button md-logo">
          
            <img src="../../assets/logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Argo CD - Declarative GitOps CD for Kubernetes
            </span>
            <span class="md-header-nav__topic">
              GnuPG verification
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/argoproj/argo-cd/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="Argo CD - Declarative GitOps CD for Kubernetes" class="md-nav__button md-logo">
      
        <img src="../../assets/logo.png" width="48" height="48">
      
    </a>
    Argo CD - Declarative GitOps CD for Kubernetes
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/argoproj/argo-cd/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../understand_the_basics/" title="Understand The Basics" class="md-nav__link">
      Understand The Basics
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../core_concepts/" title="Core Concepts" class="md-nav__link">
      Core Concepts
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../getting_started/" title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Operator Manual
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Operator Manual
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../operator-manual/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operator-manual/architecture/" title="Architectural Overview" class="md-nav__link">
      Architectural Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operator-manual/declarative-setup/" title="Declarative Setup" class="md-nav__link">
      Declarative Setup
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operator-manual/ingress/" title="Ingress Configuration" class="md-nav__link">
      Ingress Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-5" type="checkbox" id="nav-5-5">
    
    <label class="md-nav__link" for="nav-5-5">
      User Management
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-5">
        User Management
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../operator-manual/user-management/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operator-manual/user-management/auth0/" title="Auth0" class="md-nav__link">
      Auth0
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operator-manual/user-management/microsoft/" title="Microsoft" class="md-nav__link">
      Microsoft
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operator-manual/user-management/okta/" title="Okta" class="md-nav__link">
      Okta
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operator-manual/user-management/onelogin/" title="OneLogin" class="md-nav__link">
      OneLogin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operator-manual/user-management/keycloak/" title="Keycloak" class="md-nav__link">
      Keycloak
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operator-manual/user-management/openunison/" title="OpenUnison" class="md-nav__link">
      OpenUnison
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operator-manual/user-management/google/" title="Google" class="md-nav__link">
      Google
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operator-manual/rbac/" title="RBAC Configuration" class="md-nav__link">
      RBAC Configuration
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operator-manual/security/" title="Security" class="md-nav__link">
      Security
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operator-manual/cluster-bootstrapping/" title="Cluster Bootstrapping" class="md-nav__link">
      Cluster Bootstrapping
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operator-manual/secret-management/" title="Secret Management" class="md-nav__link">
      Secret Management
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operator-manual/high_availability/" title="High Availability" class="md-nav__link">
      High Availability
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operator-manual/disaster_recovery/" title="Disaster Recovery" class="md-nav__link">
      Disaster Recovery
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operator-manual/webhook/" title="Git Webhook Configuration" class="md-nav__link">
      Git Webhook Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operator-manual/health/" title="Resource Health" class="md-nav__link">
      Resource Health
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operator-manual/custom_tools/" title="Custom Tooling" class="md-nav__link">
      Custom Tooling
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operator-manual/custom-styles/" title="Custom Styles" class="md-nav__link">
      Custom Styles
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operator-manual/metrics/" title="Metrics" class="md-nav__link">
      Metrics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operator-manual/notifications/" title="Notifications" class="md-nav__link">
      Notifications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operator-manual/troubleshooting/" title="Troubleshooting Tools" class="md-nav__link">
      Troubleshooting Tools
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-18" type="checkbox" id="nav-5-18">
    
    <label class="md-nav__link" for="nav-5-18">
      Server Configuration Parameters
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-18">
        Server Configuration Parameters
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../operator-manual/server-commands/argocd-server/" title="Argocd server" class="md-nav__link">
      Argocd server
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operator-manual/server-commands/argocd-application-controller/" title="Argocd application controller" class="md-nav__link">
      Argocd application controller
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operator-manual/server-commands/argocd-repo-server/" title="Argocd repo server" class="md-nav__link">
      Argocd repo server
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operator-manual/server-commands/argocd-dex/" title="Argocd dex" class="md-nav__link">
      Argocd dex
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operator-manual/server-commands/argocd-util/" title="argocd-util Tools" class="md-nav__link">
      argocd-util Tools
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-20" type="checkbox" id="nav-5-20">
    
    <label class="md-nav__link" for="nav-5-20">
      Upgrading
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-20">
        Upgrading
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../operator-manual/upgrading/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operator-manual/upgrading/1.7-1.8/" title="v1.7 to 1.8" class="md-nav__link">
      v1.7 to 1.8
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operator-manual/upgrading/1.6-1.7/" title="v1.6 to 1.7" class="md-nav__link">
      v1.6 to 1.7
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operator-manual/upgrading/1.5-1.6/" title="v1.5 to 1.6" class="md-nav__link">
      v1.5 to 1.6
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operator-manual/upgrading/1.4-1.5/" title="v1.4 to 1.5" class="md-nav__link">
      v1.4 to 1.5
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operator-manual/upgrading/1.3-1.4/" title="v1.3 to 1.4" class="md-nav__link">
      v1.3 to 1.4
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operator-manual/upgrading/1.2-1.3/" title="v1.2 to 1.3" class="md-nav__link">
      v1.2 to 1.3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operator-manual/upgrading/1.1-1.2/" title="v1.1 to 1.2" class="md-nav__link">
      v1.1 to 1.2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operator-manual/upgrading/1.0-1.1/" title="v1.0 to 1.1" class="md-nav__link">
      v1.0 to 1.1
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" checked>
    
    <label class="md-nav__link" for="nav-6">
      User Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        User Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../application_sources/" title="Tools" class="md-nav__link">
      Tools
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../kustomize/" title="Kustomize" class="md-nav__link">
      Kustomize
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../helm/" title="Helm" class="md-nav__link">
      Helm
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ksonnet/" title="Ksonnet" class="md-nav__link">
      Ksonnet
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../jsonnet/" title="Jsonnet" class="md-nav__link">
      Jsonnet
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../config-management-plugins/" title="Plugins" class="md-nav__link">
      Plugins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tool_detection/" title="Tool Detection" class="md-nav__link">
      Tool Detection
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../projects/" title="Projects" class="md-nav__link">
      Projects
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../private-repositories/" title="Private Repositories" class="md-nav__link">
      Private Repositories
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        GnuPG verification
      </label>
    
    <a href="./" title="GnuPG verification" class="md-nav__link md-nav__link--active">
      GnuPG verification
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" title="Overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#signature-verification-targets" title="Signature verification targets" class="md-nav__link">
    Signature verification targets
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enforcing-signature-verification" title="Enforcing signature verification" class="md-nav__link">
    Enforcing signature verification
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rbac-rules-for-managing-gnupg-keys" title="RBAC rules for managing GnuPG keys" class="md-nav__link">
    RBAC rules for managing GnuPG keys
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#importing-gnupg-public-keys" title="Importing GnuPG public keys" class="md-nav__link">
    Importing GnuPG public keys
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#manage-public-keys-using-the-cli" title="Manage public keys using the CLI" class="md-nav__link">
    Manage public keys using the CLI
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#listing-all-configured-keys" title="Listing all configured keys" class="md-nav__link">
    Listing all configured keys
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#show-information-about-a-certain-key" title="Show information about a certain key" class="md-nav__link">
    Show information about a certain key
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing-a-key" title="Importing a key" class="md-nav__link">
    Importing a key
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removing-a-key-from-configuration" title="Removing a key from configuration" class="md-nav__link">
    Removing a key from configuration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manage-public-keys-using-the-web-ui" title="Manage public keys using the Web UI" class="md-nav__link">
    Manage public keys using the Web UI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manage-public-keys-in-declarative-setup" title="Manage public keys in declarative setup" class="md-nav__link">
    Manage public keys in declarative setup
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-a-project-to-enforce-signature-verification" title="Configuring a project to enforce signature verification" class="md-nav__link">
    Configuring a project to enforce signature verification
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuring-using-the-cli" title="Configuring using the CLI" class="md-nav__link">
    Configuring using the CLI
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-a-key-id-to-list-of-allowed-keys" title="Adding a key ID to list of allowed keys" class="md-nav__link">
    Adding a key ID to list of allowed keys
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removing-a-key-id-from-the-list-of-allowed-keys" title="Removing a key ID from the list of allowed keys" class="md-nav__link">
    Removing a key ID from the list of allowed keys
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#showing-allowed-key-ids-for-a-project" title="Showing allowed key IDs for a project" class="md-nav__link">
    Showing allowed key IDs for a project
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#override-list-of-key-ids" title="Override list of key IDs" class="md-nav__link">
    Override list of key IDs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-using-the-web-ui" title="Configure using the Web UI" class="md-nav__link">
    Configure using the Web UI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-using-declarative-setup" title="Configure using declarative setup" class="md-nav__link">
    Configure using declarative setup
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" title="Troubleshooting" class="md-nav__link">
    Troubleshooting
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#disabling-the-feature" title="Disabling the feature" class="md-nav__link">
    Disabling the feature
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gnupg-key-ring" title="GnuPG key ring" class="md-nav__link">
    GnuPG key ring
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../auto_sync/" title="Automated Sync Policy" class="md-nav__link">
      Automated Sync Policy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../diffing/" title="Diffing Customization" class="md-nav__link">
      Diffing Customization
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../orphaned-resources/" title="Orphaned Resources Monitoring" class="md-nav__link">
      Orphaned Resources Monitoring
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../compare-options/" title="Compare Options" class="md-nav__link">
      Compare Options
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sync-options/" title="Sync Options" class="md-nav__link">
      Sync Options
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../parameters/" title="Parameter Overrides" class="md-nav__link">
      Parameter Overrides
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../build-environment/" title="Build Environment" class="md-nav__link">
      Build Environment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tracking_strategies/" title="Tracking and Deployment Strategies" class="md-nav__link">
      Tracking and Deployment Strategies
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../resource_hooks/" title="Resource Hooks" class="md-nav__link">
      Resource Hooks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../selective_sync/" title="Selective Sync" class="md-nav__link">
      Selective Sync
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sync-waves/" title="Sync Phases and Waves" class="md-nav__link">
      Sync Phases and Waves
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sync_windows/" title="Sync Windows" class="md-nav__link">
      Sync Windows
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ci_automation/" title="Automation from CI Pipelines" class="md-nav__link">
      Automation from CI Pipelines
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../app_deletion/" title="App Deletion" class="md-nav__link">
      App Deletion
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../best_practices/" title="Best Practices" class="md-nav__link">
      Best Practices
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../status-badge/" title="Status Badge" class="md-nav__link">
      Status Badge
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../external-url/" title="Add external URL" class="md-nav__link">
      Add external URL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/argocd/" title="Command Reference" class="md-nav__link">
      Command Reference
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Developer Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Developer Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../developer-guide/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developer-guide/contributing/" title="Contribution guide" class="md-nav__link">
      Contribution guide
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developer-guide/running-locally/" title="Running ArgoCD locally" class="md-nav__link">
      Running ArgoCD locally
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developer-guide/debugging-remote-environment/" title="Debugging a Remote ArgoCD Environment" class="md-nav__link">
      Debugging a Remote ArgoCD Environment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developer-guide/api-docs/" title="API Docs" class="md-nav__link">
      API Docs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developer-guide/test-e2e/" title="E2E Tests" class="md-nav__link">
      E2E Tests
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developer-guide/dependencies/" title="Managing Dependencies" class="md-nav__link">
      Managing Dependencies
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developer-guide/ci/" title="Continuous Integration (CI)" class="md-nav__link">
      Continuous Integration (CI)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developer-guide/releasing/" title="Releasing" class="md-nav__link">
      Releasing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developer-guide/site/" title="Site" class="md-nav__link">
      Site
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developer-guide/faq/" title="Contribution FAQ" class="md-nav__link">
      Contribution FAQ
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../faq/" title="FAQ" class="md-nav__link">
      FAQ
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../security_considerations/" title="Security Considerations" class="md-nav__link">
      Security Considerations
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../SUPPORT/" title="Support" class="md-nav__link">
      Support
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../roadmap/" title="Roadmap" class="md-nav__link">
      Roadmap
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="https://github.com/argoproj/argo-cd/releases" title="Releases ⧉" class="md-nav__link">
      Releases ⧉
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="https://blog.argoproj.io/" title="Blog ⧉" class="md-nav__link">
      Blog ⧉
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" title="Overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#signature-verification-targets" title="Signature verification targets" class="md-nav__link">
    Signature verification targets
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enforcing-signature-verification" title="Enforcing signature verification" class="md-nav__link">
    Enforcing signature verification
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rbac-rules-for-managing-gnupg-keys" title="RBAC rules for managing GnuPG keys" class="md-nav__link">
    RBAC rules for managing GnuPG keys
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#importing-gnupg-public-keys" title="Importing GnuPG public keys" class="md-nav__link">
    Importing GnuPG public keys
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#manage-public-keys-using-the-cli" title="Manage public keys using the CLI" class="md-nav__link">
    Manage public keys using the CLI
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#listing-all-configured-keys" title="Listing all configured keys" class="md-nav__link">
    Listing all configured keys
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#show-information-about-a-certain-key" title="Show information about a certain key" class="md-nav__link">
    Show information about a certain key
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing-a-key" title="Importing a key" class="md-nav__link">
    Importing a key
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removing-a-key-from-configuration" title="Removing a key from configuration" class="md-nav__link">
    Removing a key from configuration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manage-public-keys-using-the-web-ui" title="Manage public keys using the Web UI" class="md-nav__link">
    Manage public keys using the Web UI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manage-public-keys-in-declarative-setup" title="Manage public keys in declarative setup" class="md-nav__link">
    Manage public keys in declarative setup
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-a-project-to-enforce-signature-verification" title="Configuring a project to enforce signature verification" class="md-nav__link">
    Configuring a project to enforce signature verification
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuring-using-the-cli" title="Configuring using the CLI" class="md-nav__link">
    Configuring using the CLI
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-a-key-id-to-list-of-allowed-keys" title="Adding a key ID to list of allowed keys" class="md-nav__link">
    Adding a key ID to list of allowed keys
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removing-a-key-id-from-the-list-of-allowed-keys" title="Removing a key ID from the list of allowed keys" class="md-nav__link">
    Removing a key ID from the list of allowed keys
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#showing-allowed-key-ids-for-a-project" title="Showing allowed key IDs for a project" class="md-nav__link">
    Showing allowed key IDs for a project
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#override-list-of-key-ids" title="Override list of key IDs" class="md-nav__link">
    Override list of key IDs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-using-the-web-ui" title="Configure using the Web UI" class="md-nav__link">
    Configure using the Web UI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-using-declarative-setup" title="Configure using declarative setup" class="md-nav__link">
    Configure using declarative setup
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" title="Troubleshooting" class="md-nav__link">
    Troubleshooting
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#disabling-the-feature" title="Disabling the feature" class="md-nav__link">
    Disabling the feature
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gnupg-key-ring" title="GnuPG key ring" class="md-nav__link">
    GnuPG key ring
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/argoproj/argo-cd/edit/master/docs/user-guide/gpg-verification.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="gnupg-signature-verification">GnuPG signature verification<a class="headerlink" href="#gnupg-signature-verification" title="Permanent link">&para;</a></h1>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>As of v1.7 it is possible to configure ArgoCD to only sync against commits
that are signed in Git using GnuPG. Signature verification is configured on
project level.</p>
<p>If a project is configured to enforce signature verification, all applications
associated with this project must have the commits in the source repositories
signed with a GnuPG public key known to ArgoCD. ArgoCD will refuse to sync to
any revision that does not have a valid signature made by one of the configured
keys. The controller will emit a <code>ResourceComparison</code> error if it tries to sync
to a revision that is either not signed, or is signed by an unknown or not
allowed public key.</p>
<p>By default, signature verification is enabled but not enforced. If you wish to
completely disable the GnuPG functionality in ArgoCD, you have to set the
environment variable <code>ARGOCD_GPG_ENABLED</code> to <code>"false"</code> in the pod templates of
the <code>argocd-server</code>, <code>argocd-repo-server</code> and <code>argocd-application-controller</code>
deployment manifests.</p>
<p>Verification of GnuPG signatures is only supported with Git repositories. It is
not possible using Helm repositories.</p>
<div class="admonition note">
<p class="admonition-title">A few words about trust</p>
<p>ArgoCD uses a very simple trust model for the keys you import: Once the key
is imported, ArgoCD will trust it. ArgoCD does not support more complex
trust models, and it is not necessary (nor possible) to sign the public keys
you are going to import into ArgoCD.</p>
</div>
<h2 id="signature-verification-targets">Signature verification targets<a class="headerlink" href="#signature-verification-targets" title="Permanent link">&para;</a></h2>
<p>If signature verification is enforced, ArgoCD will verify the signature using
following strategy:</p>
<ul>
<li>
<p>If <code>target revision</code> is a pointer to a commit object (i.e. a branch name, the
  name of a reference such as <code>HEAD</code> or a commit SHA), ArgoCD will perform the
  signature verification on the commit object the name points to, i.e. a commit.</p>
</li>
<li>
<p>If <code>target revision</code> resolves to a tag and the tag is a lightweight tag, the
  behaviour is same as if <code>target revision</code> would be a pointer to a commit
  object. However, if the tag is annotated, the target revision will point to
  a <em>tag</em> object and thus, the signature verification is performed on the tag
  object, i.e. the tag itself must be signed (using <code>git tag -s</code>).</p>
</li>
</ul>
<h2 id="enforcing-signature-verification">Enforcing signature verification<a class="headerlink" href="#enforcing-signature-verification" title="Permanent link">&para;</a></h2>
<p>To configure enforcing of signature verification, the following steps must be
performed:</p>
<ul>
<li>Import the GnuPG public key(s) used for signing commits in ArgoCD</li>
<li>Configure a project to enforce signature verification for given keys</li>
</ul>
<p>Once you have configured one or more keys to be required for verification for
a given project, enforcement is active for all applications associated with
this project.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If signature verification is enforced, you will not be able to sync from
local sources (i.e. <code>argocd app sync --local</code>) anymore.</p>
</div>
<h2 id="rbac-rules-for-managing-gnupg-keys">RBAC rules for managing GnuPG keys<a class="headerlink" href="#rbac-rules-for-managing-gnupg-keys" title="Permanent link">&para;</a></h2>
<p>The appropriate resource notation for Argo CD's RBAC implementation to allow
the managing of GnuPG keys is <code>gpgkeys</code>.</p>
<p>To allow listing of keys for a role named <code>role:myrole</code>, use:</p>
<div class="codehilite"><pre><span></span>p, role:myrole, gpgkeys, get, *, allow
</pre></div>


<p>To allow adding keys for a role named <code>role:myrole</code>, use:</p>
<div class="codehilite"><pre><span></span>p, role:myrole, gpgkeys, create, *, allow
</pre></div>


<p>And finally, to allow deletion of keys for a role named <code>role:myrole</code>, use:</p>
<div class="codehilite"><pre><span></span>p, role:myrole, gpgkeys, delete, *, allow
</pre></div>


<h2 id="importing-gnupg-public-keys">Importing GnuPG public keys<a class="headerlink" href="#importing-gnupg-public-keys" title="Permanent link">&para;</a></h2>
<p>You can configure the GnuPG public keys that ArgoCD will use for verification
of commit signatures using either the CLI, the web UI or configuring it using
declarative setup.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>After you have imported a GnuPG key, it may take a while until the key is
propagated within the cluster, even if listed as configured. If you still
cannot sync to commits signed by the already imported key, please see the
troubleshooting section below.</p>
</div>
<p>Users wanting to manage the GnuPG public key configuration require the RBAC
permissions for <code>gpgkeys</code> resources.</p>
<h3 id="manage-public-keys-using-the-cli">Manage public keys using the CLI<a class="headerlink" href="#manage-public-keys-using-the-cli" title="Permanent link">&para;</a></h3>
<p>To configure GnuPG public keys using the CLI, use the <code>argocd gpg</code> command.</p>
<h4 id="listing-all-configured-keys">Listing all configured keys<a class="headerlink" href="#listing-all-configured-keys" title="Permanent link">&para;</a></h4>
<p>To list all configured keys known to ArgoCD, use the <code>argocd gpg list</code>
sub-command:</p>
<div class="codehilite"><pre><span></span>argocd gpg list
</pre></div>


<h4 id="show-information-about-a-certain-key">Show information about a certain key<a class="headerlink" href="#show-information-about-a-certain-key" title="Permanent link">&para;</a></h4>
<p>To get information about a specific key, use the <code>argocd gpg get</code> sub-command:</p>
<div class="codehilite"><pre><span></span>argocd gpg get &lt;key-id&gt;
</pre></div>


<h4 id="importing-a-key">Importing a key<a class="headerlink" href="#importing-a-key" title="Permanent link">&para;</a></h4>
<p>To import a new key to ArgoCD, use the <code>argocd gpg add</code> sub-command:</p>
<div class="codehilite"><pre><span></span>argocd gpg add --from &lt;path-to-key&gt;
</pre></div>


<p>The key to be imported can be either in binary or ASCII-armored format.</p>
<h4 id="removing-a-key-from-configuration">Removing a key from configuration<a class="headerlink" href="#removing-a-key-from-configuration" title="Permanent link">&para;</a></h4>
<p>To remove a previously configured key from the configuration, use the
<code>argocd gpg rm</code> sub-command:</p>
<div class="codehilite"><pre><span></span>argocd gpg rm &lt;key-id&gt;
</pre></div>


<h3 id="manage-public-keys-using-the-web-ui">Manage public keys using the Web UI<a class="headerlink" href="#manage-public-keys-using-the-web-ui" title="Permanent link">&para;</a></h3>
<p>Basic key management functionality for listing, importing and removing GnuPG
public keys is implemented in the Web UI. You can find the configuration
module from the <strong>Settings</strong> page in the <strong>GnuPG keys</strong> module.</p>
<p>Please note that when you configure keys using the Web UI, the key must be
imported in ASCII armored format for now.</p>
<h3 id="manage-public-keys-in-declarative-setup">Manage public keys in declarative setup<a class="headerlink" href="#manage-public-keys-in-declarative-setup" title="Permanent link">&para;</a></h3>
<p>ArgoCD stores public keys internally in the <code>argocd-gpg-keys-cm</code> ConfigMap
resource, with the public GnuPG key's ID as its name and the ASCII armored
key data as string value, i.e. the entry for the GitHub's web-flow signing
key would look like follows:</p>
<div class="codehilite"><pre><span></span><span class="nt">4AEE18F83AFDEB23</span><span class="p">:</span> <span class="p p-Indicator">|</span>
    <span class="no">-----BEGIN PGP PUBLIC KEY BLOCK-----</span>

    <span class="no">mQENBFmUaEEBCACzXTDt6ZnyaVtueZASBzgnAmK13q9Urgch+sKYeIhdymjuMQta</span>
    <span class="no">x15OklctmrZtqre5kwPUosG3/B2/ikuPYElcHgGPL4uL5Em6S5C/oozfkYzhwRrT</span>
    <span class="no">SQzvYjsE4I34To4UdE9KA97wrQjGoz2Bx72WDLyWwctD3DKQtYeHXswXXtXwKfjQ</span>
    <span class="no">7Fy4+Bf5IPh76dA8NJ6UtjjLIDlKqdxLW4atHe6xWFaJ+XdLUtsAroZcXBeWDCPa</span>
    <span class="no">buXCDscJcLJRKZVc62gOZXXtPfoHqvUPp3nuLA4YjH9bphbrMWMf810Wxz9JTd3v</span>
    <span class="no">yWgGqNY0zbBqeZoGv+TuExlRHT8ASGFS9SVDABEBAAG0NUdpdEh1YiAod2ViLWZs</span>
    <span class="no">b3cgY29tbWl0IHNpZ25pbmcpIDxub3JlcGx5QGdpdGh1Yi5jb20+iQEiBBMBCAAW</span>
    <span class="no">BQJZlGhBCRBK7hj4Ov3rIwIbAwIZAQAAmQEH/iATWFmi2oxlBh3wAsySNCNV4IPf</span>
    <span class="no">DDMeh6j80WT7cgoX7V7xqJOxrfrqPEthQ3hgHIm7b5MPQlUr2q+UPL22t/I+ESF6</span>
    <span class="no">9b0QWLFSMJbMSk+BXkvSjH9q8jAO0986/pShPV5DU2sMxnx4LfLfHNhTzjXKokws</span>
    <span class="no">+8ptJ8uhMNIDXfXuzkZHIxoXk3rNcjDN5c5X+sK8UBRH092BIJWCOfaQt7v7wig5</span>
    <span class="no">4Ra28pM9GbHKXVNxmdLpCFyzvyMuCmINYYADsC848QQFFwnd4EQnupo6QvhEVx1O</span>
    <span class="no">j7wDwvuH5dCrLuLwtwXaQh0onG4583p0LGms2Mf5F+Ick6o/4peOlBoZz48=</span>
    <span class="no">=Bvzs</span>
    <span class="no">-----END PGP PUBLIC KEY BLOCK-----</span>
</pre></div>


<h2 id="configuring-a-project-to-enforce-signature-verification">Configuring a project to enforce signature verification<a class="headerlink" href="#configuring-a-project-to-enforce-signature-verification" title="Permanent link">&para;</a></h2>
<p>Once you have imported the GnuPG keys to ArgoCD, you must now configure the
project to enforce the verification of commit signatures with the imported
keys.</p>
<h3 id="configuring-using-the-cli">Configuring using the CLI<a class="headerlink" href="#configuring-using-the-cli" title="Permanent link">&para;</a></h3>
<h4 id="adding-a-key-id-to-list-of-allowed-keys">Adding a key ID to list of allowed keys<a class="headerlink" href="#adding-a-key-id-to-list-of-allowed-keys" title="Permanent link">&para;</a></h4>
<p>To add a key ID to the list of allowed GnuPG keys for a project, you can use
the <code>argocd proj add-signature-key</code> command, i.e. the following command would
add the key ID <code>4AEE18F83AFDEB23</code> to the project named <code>myproj</code>:</p>
<div class="codehilite"><pre><span></span>argocd proj add-signature-key myproj 4AEE18F83AFDEB23
</pre></div>


<h4 id="removing-a-key-id-from-the-list-of-allowed-keys">Removing a key ID from the list of allowed keys<a class="headerlink" href="#removing-a-key-id-from-the-list-of-allowed-keys" title="Permanent link">&para;</a></h4>
<p>Similarily, you can remove a key ID from the list of allowed GnuPG keys for a
project using the <code>argocd proj remove-signature-key</code> command, i.e. to remove
the key added above from project <code>myproj</code>, use the command:</p>
<div class="codehilite"><pre><span></span>argocd proj remove-signature-key myproj 4AEE18F83AFDEB23
</pre></div>


<h4 id="showing-allowed-key-ids-for-a-project">Showing allowed key IDs for a project<a class="headerlink" href="#showing-allowed-key-ids-for-a-project" title="Permanent link">&para;</a></h4>
<p>To see which key IDs are allowed for a given project, you can inspect the
output of the <code>argocd proj get</code> command, i.e for a project named <code>gpg</code>:</p>
<div class="codehilite"><pre><span></span>$ argocd proj get gpg
Name:                        gpg
Description:                 GnuPG verification
Destinations:                *,*
Repositories:                *
Allowed Cluster Resources:   */*
Denied Namespaced Resources: &lt;none&gt;
Signature keys:              4AEE18F83AFDEB23, 07E34825A909B250
Orphaned Resources:          disabled
</pre></div>


<h4 id="override-list-of-key-ids">Override list of key IDs<a class="headerlink" href="#override-list-of-key-ids" title="Permanent link">&para;</a></h4>
<p>You can also explicitly set the currently allowed keys with one or more new keys
using the <code>argocd proj set</code> command in combination with the <code>--signature-keys</code>
flag, which you can use to specify a comma separated list of allowed key IDs:</p>
<div class="codehilite"><pre><span></span>argocd proj <span class="nb">set</span> myproj --signature-keys 4AEE18F83AFDEB23,07E34825A909B250
</pre></div>


<p>The <code>--signature-keys</code> flag can also be used on project creation, i.e. the
<code>argocd proj create</code> command.</p>
<h3 id="configure-using-the-web-ui">Configure using the Web UI<a class="headerlink" href="#configure-using-the-web-ui" title="Permanent link">&para;</a></h3>
<p>You can configure the GnuPG key IDs required for signature verification using
the web UI, in the Project configuration. Navigate to the <strong>Settings</strong> page
and select the <strong>Projects</strong> module, then click on the project you want to
configure.</p>
<p>From the project's details page, click <strong>Edit</strong> and find the
<strong>Required signature keys</strong> section, where you can add or remove the key IDs
for signature verification. After you have modified your project, click
<strong>Update</strong> to save the changes.</p>
<h3 id="configure-using-declarative-setup">Configure using declarative setup<a class="headerlink" href="#configure-using-declarative-setup" title="Permanent link">&para;</a></h3>
<p>You can specify the key IDs required for signature verification in the project
manifest within the <code>signatureKeys</code> section, i.e:</p>
<div class="codehilite"><pre><span></span><span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">AppProject</span>
<span class="nt">metadata</span><span class="p">:</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">gpg</span>
  <span class="nt">namespace</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="nt">spec</span><span class="p">:</span>
  <span class="nt">clusterResourceWhitelist</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">group</span><span class="p">:</span> <span class="s">&#39;*&#39;</span>
    <span class="nt">kind</span><span class="p">:</span> <span class="s">&#39;*&#39;</span>
  <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">GnuPG verification</span>
  <span class="nt">destinations</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">namespace</span><span class="p">:</span> <span class="s">&#39;*&#39;</span>
    <span class="nt">server</span><span class="p">:</span> <span class="s">&#39;*&#39;</span>
  <span class="nt">namespaceResourceWhitelist</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">group</span><span class="p">:</span> <span class="s">&#39;*&#39;</span>
    <span class="nt">kind</span><span class="p">:</span> <span class="s">&#39;*&#39;</span>
  <span class="nt">signatureKeys</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">keyID</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">4AEE18F83AFDEB23</span>
  <span class="nt">sourceRepos</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;*&#39;</span>
</pre></div>


<p><code>signatureKeys</code> is an array of <code>SignatureKey</code> objects, whose only property is
<code>keyID</code> at the moment.</p>
<h2 id="troubleshooting">Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permanent link">&para;</a></h2>
<h3 id="disabling-the-feature">Disabling the feature<a class="headerlink" href="#disabling-the-feature" title="Permanent link">&para;</a></h3>
<p>The GnuPG feature can be completely disabled if desired. In order to disable it,
set the environment variable <code>ARGOCD_GPG_ENABLED</code> to <code>false</code> for the pod
templates of the <code>argocd-server</code>, <code>argocd-repo-server</code> and
 <code>argocd-application-controller</code> deployments.</p>
<p>After the pods have been restarted, the GnuPG feature is disabled.</p>
<h3 id="gnupg-key-ring">GnuPG key ring<a class="headerlink" href="#gnupg-key-ring" title="Permanent link">&para;</a></h3>
<p>The GnuPG key ring used for signature verification is maintained within the
pods of <code>argocd-repo-server</code>. The keys in the keyring are synchronized to the
configuration stored in the <code>argocd-gpg-keys-cm</code> ConfigMap resource, which is
volume-mounted to the <code>argocd-repo-server</code> pods.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The GnuPG key ring in the pods is transient and gets recreated from the
configuration on each restart of the pods. You should never add or remove
keys manually to the key ring, because your changes will be lost. Also,
any of the private keys found in the key ring are transient and will be
regenerated upon each restart. The private key is only used to build the
trust DB for the running pod.</p>
</div>
<p>To check whether the keys are actually in sync, you can <code>kubectl exec</code> into the
repository server's pods and inspect the key ring, which is located at path
<code>/app/config/gpg/keys</code></p>
<div class="codehilite"><pre><span></span>$ kubectl <span class="nb">exec</span> -it argocd-repo-server-7d6bdfdf6d-hzqkg bash
argocd@argocd-repo-server-7d6bdfdf6d-hzqkg:~$ <span class="nv">GNUPGHOME</span><span class="o">=</span>/app/config/gpg/keys gpg --list-keys
/app/config/gpg/keys/pubring.kbx
--------------------------------
pub   rsa2048 <span class="m">2020</span>-06-15 <span class="o">[</span>SC<span class="o">]</span> <span class="o">[</span>expires: <span class="m">2020</span>-12-12<span class="o">]</span>
      D48F075D818A813C436914BC9324F0D2144753B1
uid           <span class="o">[</span>ultimate<span class="o">]</span> Anon Ymous <span class="o">(</span>ArgoCD key signing key<span class="o">)</span> &lt;noreply@argoproj.io&gt;

pub   rsa2048 <span class="m">2017</span>-08-16 <span class="o">[</span>SC<span class="o">]</span>
      5DE3E0509C47EA3CF04A42D34AEE18F83AFDEB23
uid           <span class="o">[</span>ultimate<span class="o">]</span> GitHub <span class="o">(</span>web-flow commit signing<span class="o">)</span> &lt;noreply@github.com&gt;

argocd@argocd-repo-server-7d6bdfdf6d-hzqkg:~$
</pre></div>


<p>If the key ring stays out of sync with your configuration after you have added
or removed keys for a longer period of time, you might want to restart your
<code>argocd-repo-server</code> pods. If such a problem persists, please consider raising
a bug report.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../private-repositories/" title="Private Repositories" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Private Repositories
              </span>
            </div>
          </a>
        
        
          <a href="../auto_sync/" title="Automated Sync Policy" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Automated Sync Policy
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.dc02f8ce.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
        <script src="../../assets/versions.js"></script>
      
    
  </body>
</html>